import{C as i,R as t,O as n,P as s,z as e,g as o,l as a,w as r,y as c,G as l,H as d,I as h,D as p,A as u}from"./tsparticles-engine.CajW4cSt.js";class k extends i{constructor(i,t,n,s){super(i,t,n),this.canvasSize=s,this.canvasSize={...s}}contains(i){const{width:t,height:n}=this.canvasSize,{x:s,y:e}=i;return super.contains(i)||super.contains({x:s-t,y:e})||super.contains({x:s-t,y:e-n})||super.contains({x:s,y:e-n})}intersects(n){if(super.intersects(n))return!0;const s=n,e=n,o={x:n.position.x-this.canvasSize.width,y:n.position.y-this.canvasSize.height};if(void 0!==e.radius){const t=new i(o.x,o.y,2*e.radius);return super.intersects(t)}if(void 0!==s.size){const i=new t(o.x,o.y,2*s.size.width,2*s.size.height);return super.intersects(i)}return!1}}class y{constructor(){this.blur=5,this.color=new n,this.color.value="#000",this.enable=!1}load(i){i&&(void 0!==i.blur&&(this.blur=i.blur),this.color=n.create(this.color,i.color),void 0!==i.enable&&(this.enable=i.enable))}}class f{constructor(){this.enable=!1,this.frequency=1}load(i){i&&(void 0!==i.color&&(this.color=n.create(this.color,i.color)),void 0!==i.enable&&(this.enable=i.enable),void 0!==i.frequency&&(this.frequency=i.frequency),void 0!==i.opacity&&(this.opacity=i.opacity))}}class g{constructor(){this.blink=!1,this.color=new n,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new y,this.triangles=new f,this.width=1,this.warp=!1}load(i){i&&(void 0!==i.id&&(this.id=i.id),void 0!==i.blink&&(this.blink=i.blink),this.color=n.create(this.color,i.color),void 0!==i.consent&&(this.consent=i.consent),void 0!==i.distance&&(this.distance=i.distance),void 0!==i.enable&&(this.enable=i.enable),void 0!==i.frequency&&(this.frequency=i.frequency),void 0!==i.opacity&&(this.opacity=i.opacity),this.shadow.load(i.shadow),this.triangles.load(i.triangles),void 0!==i.width&&(this.width=i.width),void 0!==i.warp&&(this.warp=i.warp))}}function w(i,t,n,s,e){const{dx:a,dy:r,distance:c}=o(i,t);if(!e||c<=n)return c;const l={x:Math.abs(a),y:Math.abs(r)},d=Math.min(l.x,s.width-l.x),h=Math.min(l.y,s.height-l.y);return Math.sqrt(d**2+h**2)}class x extends s{constructor(i){super(i),this._setColor=i=>{if(!i.options.links)return;const t=this.linkContainer,n=i.options.links;let s=void 0===n.id?t.particles.linksColor:t.particles.linksColors.get(n.id);if(s)return;const o=n.color;s=e(o,n.blink,n.consent),void 0===n.id?t.particles.linksColor=s:t.particles.linksColors.set(n.id,s)},this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(t){if(!t.options.links)return;t.links=[];const n=t.getPosition(),s=this.container,e=s.canvas.size;if(n.x<0||n.y<0||n.x>e.width||n.y>e.height)return;const o=t.options.links,a=o.opacity,r=t.retina.linksDistance??0,c=o.warp,l=c?new k(n.x,n.y,r,e):new i(n.x,n.y,r),d=s.particles.quadTree.query(l);for(const i of d){const s=i.options.links;if(t===i||!s?.enable||o.id!==s.id||i.spawning||i.destroyed||!i.links||t.links.some((t=>t.destination===i))||i.links.some((i=>i.destination===t)))continue;const l=i.getPosition();if(l.x<0||l.y<0||l.x>e.width||l.y>e.height)continue;const d=w(n,l,r,e,c&&s.warp);if(d>r)continue;const h=(1-d/r)*a;this._setColor(t),t.links.push({destination:i,opacity:h})}}isEnabled(i){return!!i.options.links?.enable}loadParticlesOptions(i,...t){i.links||(i.links=new g);for(const n of t)i.links.load(n?.links??n?.lineLinked??n?.line_linked)}reset(){}}function b(i,t){const n=((s=i.map((i=>i.id))).sort(((i,t)=>i-t)),s.join("_"));var s;let e=t.get(n);return void 0===e&&(e=h(),t.set(n,e)),e}class v{constructor(i){this.container=i,this._drawLinkLine=(i,t)=>{const n=i.options.links;if(!n?.enable)return;const s=this.container,e=s.actualOptions,d=t.destination,k=i.getPosition(),y=d.getPosition();let f=t.opacity;s.canvas.draw((t=>{let g;const w=i.options.twinkle?.lines;if(w?.enable){const i=w.frequency,t=l(w.color);h()<i&&t&&(g=t,f=p(w.opacity))}if(!g){const t=void 0!==n.id?s.particles.linksColors.get(n.id):s.particles.linksColor;g=u(i,d,t)}if(!g)return;const x=i.retina.linksWidth??0,b=i.retina.linksDistance??0,{backgroundMask:v}=e;!function(i){let t=!1;const{begin:n,end:s,maxDistance:e,context:d,canvasSize:h,width:p,backgroundMask:u,colorLine:k,opacity:y,links:f}=i;if(a(n,s)<=e)r(d,n,s),t=!0;else if(f.warp){let i,a;const c={x:s.x-h.width,y:s.y},l=o(n,c);if(l.distance<=e){const t=n.y-l.dy/l.dx*n.x;i={x:0,y:t},a={x:h.width,y:t}}else{const t={x:s.x,y:s.y-h.height},r=o(n,t);if(r.distance<=e){const t=-(n.y-r.dy/r.dx*n.x)/(r.dy/r.dx);i={x:t,y:0},a={x:t,y:h.height}}else{const t={x:s.x-h.width,y:s.y-h.height},r=o(n,t);if(r.distance<=e){const t=n.y-r.dy/r.dx*n.x;i={x:-t/(r.dy/r.dx),y:t},a={x:i.x+h.width,y:i.y+h.height}}}}i&&a&&(r(d,n,i),r(d,s,a),t=!0)}if(!t)return;d.lineWidth=p,u.enable&&(d.globalCompositeOperation=u.composite),d.strokeStyle=c(k,y);const{shadow:g}=f;if(g.enable){const i=l(g.color);i&&(d.shadowBlur=g.blur,d.shadowColor=c(i))}d.stroke()}({context:t,width:x,begin:k,end:y,maxDistance:b,canvasSize:s.canvas.size,links:n,backgroundMask:v,colorLine:g,opacity:f})}))},this._drawLinkTriangle=(i,t,n)=>{const s=i.options.links;if(!s?.enable)return;const e=s.triangles;if(!e.enable)return;const o=this.container,r=o.actualOptions,h=t.destination,p=n.destination,k=e.opacity??(t.opacity+n.opacity)/2;k<=0||o.canvas.draw((t=>{const n=i.getPosition(),y=h.getPosition(),f=p.getPosition(),g=i.retina.linksDistance??0;if(a(n,y)>g||a(f,y)>g||a(f,n)>g)return;let w=l(e.color);if(!w){const t=void 0!==s.id?o.particles.linksColors.get(s.id):o.particles.linksColor;w=u(i,h,t)}w&&function(i){const{context:t,pos1:n,pos2:s,pos3:e,backgroundMask:o,colorTriangle:a,opacityTriangle:r}=i;d(t,n,s,e),o.enable&&(t.globalCompositeOperation=o.composite),t.fillStyle=c(a,r),t.fill()}({context:t,pos1:n,pos2:y,pos3:f,backgroundMask:r.backgroundMask,colorTriangle:w,opacityTriangle:k})}))},this._drawTriangles=(i,t,n,s)=>{const e=n.destination;if(!i.links?.triangles.enable||!e.options.links?.triangles.enable)return;const o=e.links?.filter((i=>{const t=this._getLinkFrequency(e,i.destination);return e.options.links&&t<=e.options.links.frequency&&s.findIndex((t=>t.destination===i.destination))>=0}));if(o?.length)for(const a of o){const s=a.destination;this._getTriangleFrequency(t,e,s)>i.links.triangles.frequency||this._drawLinkTriangle(t,n,a)}},this._getLinkFrequency=(i,t)=>b([i,t],this._freqs.links),this._getTriangleFrequency=(i,t,n)=>b([i,t,n],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(i,t){const{links:n,options:s}=t;if(!n||n.length<=0)return;const e=n.filter((i=>s.links&&this._getLinkFrequency(t,i.destination)<=s.links.frequency));for(const o of e)this._drawTriangles(s,t,o,e),o.opacity>0&&(t.retina.linksWidth??0)>0&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(i){if(i.links=[],!i.options.links)return;const t=this.container.retina.pixelRatio,{retina:n}=i,{distance:s,width:e}=i.options.links;n.linksDistance=s*t,n.linksWidth=e*t}particleDestroyed(i){i.links=[]}}class q{constructor(){this.id="links"}getPlugin(i){return new v(i)}loadOptions(){}needsPlugin(){return!0}}async function C(i,t=!0){await async function(i,t=!0){await i.addInteractor("particlesLinks",(i=>new x(i)),t)}(i,t),await async function(i,t=!0){const n=new q;await i.addPlugin(n,t)}(i,t)}export{C as l};
