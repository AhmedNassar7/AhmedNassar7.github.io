import{r as t,a as s}from"./react.D1r2OQ_i.js";import{t as r}from"./tsparticles-engine.CajW4cSt.js";const i=t=>"object"==typeof t&&null!==t;function e(t,s,r=()=>!1){if(!i(t)||!i(s))return t===s;const o=Object.keys(t).filter((t=>!r(t))),n=Object.keys(s).filter((t=>!r(t)));if(o.length!==n.length)return!1;for(const p of o){const o=t[p],n=s[p];if(i(o)&&i(n)){if(o===s&&n===t)continue;if(!e(o,n,r))return!1}else if(Array.isArray(o)&&Array.isArray(n)){if(!a(o,n,r))return!1}else if(o!==n)return!1}return!0}function a(t,s,r){if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++){const n=t[o],p=s[o];if(Array.isArray(n)&&Array.isArray(p)){if(!a(n,p,r))return!1}else if(i(n)&&i(p)){if(!e(n,p,r))return!1}else if(n!==p)return!1}return!0}const o="tsparticles";class n extends t.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const s=t.options??t.params,r=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!e(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!e(s,r,(t=>t.startsWith("_")))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then((()=>{super.forceUpdate()}))}componentDidMount(){(async()=>{this.props.init&&await this.props.init(r),this.setState({init:!0},(async()=>{await this.loadParticles()}))})()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:r,className:i,canvasClassName:e,id:a}=this.props;return s.createElement("div",{className:i,id:a},s.createElement("canvas",{className:e,style:{...this.props.style,width:t,height:r}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??n.defaultProps.id??o,s=await r.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=s),this.setState({library:s}),this.props.loaded&&await this.props.loaded(s)}}n.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:o};export{n as P};
