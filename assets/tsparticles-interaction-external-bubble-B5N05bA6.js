import{j as B,k as m,O as k,c as O,E as R,l as g,n as f,m as E,o as j,p as M,q as S,s as q,u as w,C as D,R as T,v as H,i as y,f as V,h as P}from"./tsparticles-engine-B56Pkamw.js";class x{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(i){if(i){if(i.distance!==void 0&&(this.distance=i.distance),i.duration!==void 0&&(this.duration=i.duration),i.mix!==void 0&&(this.mix=i.mix),i.opacity!==void 0&&(this.opacity=i.opacity),i.color!==void 0){const e=B(this.color)?void 0:this.color;this.color=m(i.color,o=>k.create(e,o))}i.size!==void 0&&(this.size=i.size)}}}class W extends x{constructor(){super(),this.selectors=[]}get ids(){return m(this.selectors,i=>i.replace("#",""))}set ids(i){this.selectors=m(i,e=>`#${e}`)}load(i){super.load(i),i&&(i.ids!==void 0&&(this.ids=i.ids),i.selectors!==void 0&&(this.selectors=i.selectors))}}class L extends x{load(i){super.load(i),i&&(this.divs=m(i.divs,e=>{const o=new W;return o.load(e),o}))}}function _(d,i,e,o){if(i>=e)return O(d+(i-e)*o,d,i);if(i<e)return O(d-(e-i)*o,i,d)}class A extends R{constructor(i){super(i),this._clickBubble=()=>{var l;const e=this.container,o=e.actualOptions,s=e.interactivity.mouse.clickPosition,a=o.interactivity.modes.bubble;if(!a||!s)return;e.bubble||(e.bubble={});const t=e.retina.bubbleModeDistance;if(!t||t<0)return;const c=e.particles.quadTree.queryCircle(s,t,b=>this.isEnabled(b)),{bubble:n}=e;for(const b of c){if(!n.clicking)continue;b.bubble.inRange=!n.durationEnd;const v=b.getPosition(),p=g(v,s),u=(new Date().getTime()-(e.interactivity.mouse.clickTime||0))/1e3;u>a.duration&&(n.durationEnd=!0),u>2*a.duration&&(n.clicking=!1,n.durationEnd=!1);const h={bubbleObj:{optValue:e.retina.bubbleModeSize,value:b.bubble.radius},particlesObj:{optValue:f(b.options.size.value)*e.retina.pixelRatio,value:b.size.value},type:"size"};this._process(b,p,u,h);const r={bubbleObj:{optValue:a.opacity,value:b.bubble.opacity},particlesObj:{optValue:f(b.options.opacity.value),value:((l=b.opacity)==null?void 0:l.value)??1},type:"opacity"};this._process(b,p,u,r),!n.durationEnd&&p<=t?this._hoverBubbleColor(b,p):delete b.bubble.color}},this._hoverBubble=()=>{const e=this.container,o=e.interactivity.mouse.position,s=e.retina.bubbleModeDistance;if(!s||s<0||o===void 0)return;const a=e.particles.quadTree.queryCircle(o,s,t=>this.isEnabled(t));for(const t of a){t.bubble.inRange=!0;const c=t.getPosition(),n=g(c,o),l=1-n/s;n<=s?l>=0&&e.interactivity.status===E&&(this._hoverBubbleSize(t,l),this._hoverBubbleOpacity(t,l),this._hoverBubbleColor(t,l)):this.reset(t),e.interactivity.status===j&&this.reset(t)}},this._hoverBubbleColor=(e,o,s)=>{const a=this.container.actualOptions,t=s??a.interactivity.modes.bubble;if(t){if(!e.bubble.finalColor){const c=t.color;if(!c)return;const n=M(c);e.bubble.finalColor=S(n)}if(e.bubble.finalColor)if(t.mix){e.bubble.color=void 0;const c=e.getFillColor();e.bubble.color=c?q(w(c,e.bubble.finalColor,1-o,o)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,o,s)=>{var l,b;const a=this.container.actualOptions,t=(s==null?void 0:s.opacity)??((l=a.interactivity.modes.bubble)==null?void 0:l.opacity);if(!t)return;const c=e.options.opacity.value,n=_(((b=e.opacity)==null?void 0:b.value)??1,t,f(c),o);n!==void 0&&(e.bubble.opacity=n)},this._hoverBubbleSize=(e,o,s)=>{const a=this.container,t=s!=null&&s.size?s.size*a.retina.pixelRatio:a.retina.bubbleModeSize;if(t===void 0)return;const c=f(e.options.size.value)*a.retina.pixelRatio,n=_(e.size.value,t,c,o);n!==void 0&&(e.bubble.radius=n)},this._process=(e,o,s,a)=>{const t=this.container,c=a.bubbleObj.optValue,n=t.actualOptions.interactivity.modes.bubble;if(!n||c===void 0)return;const l=n.duration,b=t.retina.bubbleModeDistance,v=a.particlesObj.optValue,p=a.bubbleObj.value,u=a.particlesObj.value||0,h=a.type;if(b&&!(b<0)&&c!==v)if(t.bubble||(t.bubble={}),t.bubble.durationEnd)p&&(h==="size"&&delete e.bubble.radius,h==="opacity"&&delete e.bubble.opacity);else if(o<=b){if((p??u)!==c){const r=u-s*(u-c)/l;h==="size"&&(e.bubble.radius=r),h==="opacity"&&(e.bubble.opacity=r)}}else h==="size"&&delete e.bubble.radius,h==="opacity"&&delete e.bubble.opacity},this._singleSelectorHover=(e,o,s)=>{const a=this.container,t=document.querySelectorAll(o),c=a.actualOptions.interactivity.modes.bubble;c&&t.length&&t.forEach(n=>{const l=n,b=a.retina.pixelRatio,v={x:(l.offsetLeft+l.offsetWidth/2)*b,y:(l.offsetTop+l.offsetHeight/2)*b},p=l.offsetWidth/2*b,u=s.type==="circle"?new D(v.x,v.y,p):new T(l.offsetLeft*b,l.offsetTop*b,l.offsetWidth*b,l.offsetHeight*b),h=a.particles.quadTree.query(u,r=>this.isEnabled(r));for(const r of h){if(!u.contains(r.getPosition()))continue;r.bubble.inRange=!0;const C=c.divs,z=H(C,l);r.bubble.div&&r.bubble.div===l||(this.clear(r,e,!0),r.bubble.div=l),this._hoverBubbleSize(r,1,z),this._hoverBubbleOpacity(r,1,z),this._hoverBubbleColor(r,1,z)}})},i.bubble||(i.bubble={}),this.handleClickMode=e=>{e==="bubble"&&(i.bubble||(i.bubble={}),i.bubble.clicking=!0)}}clear(i,e,o){i.bubble.inRange&&!o||(delete i.bubble.div,delete i.bubble.opacity,delete i.bubble.radius,delete i.bubble.color)}init(){const i=this.container,e=i.actualOptions.interactivity.modes.bubble;e&&(i.retina.bubbleModeDistance=e.distance*i.retina.pixelRatio,e.size!==void 0&&(i.retina.bubbleModeSize=e.size*i.retina.pixelRatio))}async interact(i){const e=this.container.actualOptions.interactivity.events,o=e.onHover,s=e.onClick,a=o.enable,t=o.mode,c=s.enable,n=s.mode,l=e.onDiv;a&&y("bubble",t)?this._hoverBubble():c&&y("bubble",n)?this._clickBubble():V("bubble",l,(b,v)=>this._singleSelectorHover(i,b,v))}isEnabled(i){const e=this.container,o=e.actualOptions,s=e.interactivity.mouse,a=((i==null?void 0:i.interactivity)??o.interactivity).events,{onClick:t,onDiv:c,onHover:n}=a,l=P("bubble",c);return!!(l||n.enable&&s.position||t.enable&&s.clickPosition)&&(y("bubble",n.mode)||y("bubble",t.mode)||l)}loadModeOptions(i,...e){i.bubble||(i.bubble=new L);for(const o of e)i.bubble.load(o==null?void 0:o.bubble)}reset(i){i.bubble.inRange=!1}}async function I(d,i=!0){await d.addInteractor("externalBubble",e=>new A(e),i)}export{I as l};
