import{C as P,R as S,O as b,P as z,z as F,g as L,l as C,w as _,y as m,G as M,H as R,I as v,D as I,A as O}from"./tsparticles-engine.pEwhNYWv.js";class W extends P{constructor(i,n,e,t){super(i,n,e),this.canvasSize=t,this.canvasSize={...t}}contains(i){const{width:n,height:e}=this.canvasSize,{x:t,y:s}=i;return super.contains(i)||super.contains({x:t-n,y:s})||super.contains({x:t-n,y:s-e})||super.contains({x:t,y:s-e})}intersects(i){if(super.intersects(i))return!0;const n=i,e=i,t={x:i.position.x-this.canvasSize.width,y:i.position.y-this.canvasSize.height};if(e.radius!==void 0){const s=new P(t.x,t.y,e.radius*2);return super.intersects(s)}else if(n.size!==void 0){const s=new S(t.x,t.y,n.size.width*2,n.size.height*2);return super.intersects(s)}return!1}}class E{constructor(){this.blur=5,this.color=new b,this.color.value="#000",this.enable=!1}load(i){i&&(i.blur!==void 0&&(this.blur=i.blur),this.color=b.create(this.color,i.color),i.enable!==void 0&&(this.enable=i.enable))}}class B{constructor(){this.enable=!1,this.frequency=1}load(i){i&&(i.color!==void 0&&(this.color=b.create(this.color,i.color)),i.enable!==void 0&&(this.enable=i.enable),i.frequency!==void 0&&(this.frequency=i.frequency),i.opacity!==void 0&&(this.opacity=i.opacity))}}class j{constructor(){this.blink=!1,this.color=new b,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new E,this.triangles=new B,this.width=1,this.warp=!1}load(i){i&&(i.id!==void 0&&(this.id=i.id),i.blink!==void 0&&(this.blink=i.blink),this.color=b.create(this.color,i.color),i.consent!==void 0&&(this.consent=i.consent),i.distance!==void 0&&(this.distance=i.distance),i.enable!==void 0&&(this.enable=i.enable),i.frequency!==void 0&&(this.frequency=i.frequency),i.opacity!==void 0&&(this.opacity=i.opacity),this.shadow.load(i.shadow),this.triangles.load(i.triangles),i.width!==void 0&&(this.width=i.width),i.warp!==void 0&&(this.warp=i.warp))}}function A(l,i,n,e,t){const{dx:s,dy:o,distance:c}=L(l,i);if(!t||c<=n)return c;const a={x:Math.abs(s),y:Math.abs(o)},u={x:Math.min(a.x,e.width-a.x),y:Math.min(a.y,e.height-a.y)};return Math.sqrt(u.x**2+u.y**2)}class G extends z{constructor(i){super(i),this._setColor=n=>{if(!n.options.links)return;const e=this.linkContainer,t=n.options.links;let s=t.id===void 0?e.particles.linksColor:e.particles.linksColors.get(t.id);if(s)return;const o=t.color;s=F(o,t.blink,t.consent),t.id===void 0?e.particles.linksColor=s:e.particles.linksColors.set(t.id,s)},this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(i){if(!i.options.links)return;i.links=[];const n=i.getPosition(),e=this.container,t=e.canvas.size;if(n.x<0||n.y<0||n.x>t.width||n.y>t.height)return;const s=i.options.links,o=s.opacity,c=i.retina.linksDistance??0,a=s.warp,u=a?new W(n.x,n.y,c,t):new P(n.x,n.y,c),p=e.particles.quadTree.query(u);for(const d of p){const f=d.options.links;if(i===d||!f?.enable||s.id!==f.id||d.spawning||d.destroyed||!d.links||i.links.some(k=>k.destination===d)||d.links.some(k=>k.destination===i))continue;const r=d.getPosition();if(r.x<0||r.y<0||r.x>t.width||r.y>t.height)continue;const h=A(n,r,c,t,a&&f.warp);if(h>c)continue;const w=(1-h/c)*o;this._setColor(i),i.links.push({destination:d,opacity:w})}}isEnabled(i){return!!i.options.links?.enable}loadParticlesOptions(i,...n){i.links||(i.links=new j);for(const e of n)i.links.load(e?.links??e?.lineLinked??e?.line_linked)}reset(){}}async function H(l,i=!0){await l.addInteractor("particlesLinks",n=>new G(n),i)}function K(l){let i=!1;const{begin:n,end:e,maxDistance:t,context:s,canvasSize:o,width:c,backgroundMask:a,colorLine:u,opacity:p,links:d}=l;if(C(n,e)<=t)_(s,n,e),i=!0;else if(d.warp){let r,h;const w={x:e.x-o.width,y:e.y},k=L(n,w);if(k.distance<=t){const y=n.y-k.dy/k.dx*n.x;r={x:0,y},h={x:o.width,y}}else{const y={x:e.x,y:e.y-o.height},g=L(n,y);if(g.distance<=t){const x=-(n.y-g.dy/g.dx*n.x)/(g.dy/g.dx);r={x,y:0},h={x,y:o.height}}else{const q={x:e.x-o.width,y:e.y-o.height},x=L(n,q);if(x.distance<=t){const D=n.y-x.dy/x.dx*n.x;r={x:-D/(x.dy/x.dx),y:D},h={x:r.x+o.width,y:r.y+o.height}}}}r&&h&&(_(s,n,r),_(s,e,h),i=!0)}if(!i)return;s.lineWidth=c,a.enable&&(s.globalCompositeOperation=a.composite),s.strokeStyle=m(u,p);const{shadow:f}=d;if(f.enable){const r=M(f.color);r&&(s.shadowBlur=f.blur,s.shadowColor=m(r))}s.stroke()}function N(l){const{context:i,pos1:n,pos2:e,pos3:t,backgroundMask:s,colorTriangle:o,opacityTriangle:c}=l;R(i,n,e,t),s.enable&&(i.globalCompositeOperation=s.composite),i.fillStyle=m(o,c),i.fill()}function V(l){return l.sort((i,n)=>i-n),l.join("_")}function T(l,i){const n=V(l.map(t=>t.id));let e=i.get(n);return e===void 0&&(e=v(),i.set(n,e)),e}class J{constructor(i){this.container=i,this._drawLinkLine=(n,e)=>{const t=n.options.links;if(!t?.enable)return;const s=this.container,o=s.actualOptions,c=e.destination,a=n.getPosition(),u=c.getPosition();let p=e.opacity;s.canvas.draw(d=>{let f;const r=n.options.twinkle?.lines;if(r?.enable){const y=r.frequency,g=M(r.color);v()<y&&g&&(f=g,p=I(r.opacity))}if(!f){const y=t.id!==void 0?s.particles.linksColors.get(t.id):s.particles.linksColor;f=O(n,c,y)}if(!f)return;const h=n.retina.linksWidth??0,w=n.retina.linksDistance??0,{backgroundMask:k}=o;K({context:d,width:h,begin:a,end:u,maxDistance:w,canvasSize:s.canvas.size,links:t,backgroundMask:k,colorLine:f,opacity:p})})},this._drawLinkTriangle=(n,e,t)=>{const s=n.options.links;if(!s?.enable)return;const o=s.triangles;if(!o.enable)return;const c=this.container,a=c.actualOptions,u=e.destination,p=t.destination,d=o.opacity??(e.opacity+t.opacity)/2;d<=0||c.canvas.draw(f=>{const r=n.getPosition(),h=u.getPosition(),w=p.getPosition(),k=n.retina.linksDistance??0;if(C(r,h)>k||C(w,h)>k||C(w,r)>k)return;let y=M(o.color);if(!y){const g=s.id!==void 0?c.particles.linksColors.get(s.id):c.particles.linksColor;y=O(n,u,g)}y&&N({context:f,pos1:r,pos2:h,pos3:w,backgroundMask:a.backgroundMask,colorTriangle:y,opacityTriangle:d})})},this._drawTriangles=(n,e,t,s)=>{const o=t.destination;if(!(n.links?.triangles.enable&&o.options.links?.triangles.enable))return;const c=o.links?.filter(a=>{const u=this._getLinkFrequency(o,a.destination);return o.options.links&&u<=o.options.links.frequency&&s.findIndex(p=>p.destination===a.destination)>=0});if(c?.length)for(const a of c){const u=a.destination;this._getTriangleFrequency(e,o,u)>n.links.triangles.frequency||this._drawLinkTriangle(e,t,a)}},this._getLinkFrequency=(n,e)=>T([n,e],this._freqs.links),this._getTriangleFrequency=(n,e,t)=>T([n,e,t],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(i,n){const{links:e,options:t}=n;if(!e||e.length<=0)return;const s=e.filter(o=>t.links&&this._getLinkFrequency(n,o.destination)<=t.links.frequency);for(const o of s)this._drawTriangles(t,n,o,s),o.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(i){if(i.links=[],!i.options.links)return;const n=this.container.retina.pixelRatio,{retina:e}=i,{distance:t,width:s}=i.options.links;e.linksDistance=t*n,e.linksWidth=s*n}particleDestroyed(i){i.links=[]}}class Q{constructor(){this.id="links"}getPlugin(i){return new J(i)}loadOptions(){}needsPlugin(){return!0}}async function U(l,i=!0){const n=new Q;await l.addPlugin(n,i)}async function Z(l,i=!0){await H(l,i),await U(l,i)}export{Z as l};
