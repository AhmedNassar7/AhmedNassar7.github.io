const Z=Math.min,_=Math.max,R=Math.round,F=Math.floor,C=e=>({x:e,y:e});function M(){return typeof window<"u"}function X(e){return K(e)?(e.nodeName||"").toLowerCase():"#document"}function g(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function J(e){var n;return(n=(K(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function K(e){return!!M()&&(e instanceof Node||e instanceof g(e).Node)}function D(e){return!!M()&&(e instanceof HTMLElement||e instanceof g(e).HTMLElement)}function Y(e){return!(!M()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof g(e).ShadowRoot)}function Q(e){const{overflow:n,overflowX:t,overflowY:u,display:i}=T(e);return/auto|scroll|overlay|hidden|clip/.test(n+u+t)&&!["inline","contents"].includes(i)}function T(e){return g(e).getComputedStyle(e)}function U(e){const n=function(t){if(X(t)==="html")return t;const u=t.assignedSlot||t.parentNode||Y(t)&&t.host||J(t);return Y(u)?u.host:u}(e);return function(t){return["html","body","#document"].includes(X(t))}(n)?e.ownerDocument?e.ownerDocument.body:e.body:D(n)&&Q(n)?n:U(n)}function L(e,n,t){var u;n===void 0&&(n=[]),t===void 0&&(t=!0);const i=U(e),m=i===((u=e.ownerDocument)==null?void 0:u.body),l=g(i);if(m){const h=N(l);return n.concat(l,l.visualViewport||[],Q(i)?i:[],h&&t?L(h):[])}return n.concat(i,L(i,[],t))}function N(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function A(e){return n=e,M()&&(n instanceof Element||n instanceof g(n).Element)?e:e.contextElement;var n}function k(e){const n=A(e);if(!D(n))return C(1);const t=n.getBoundingClientRect(),{width:u,height:i,$:m}=function(d){const a=T(d);let v=parseFloat(a.width)||0,w=parseFloat(a.height)||0;const p=D(d),f=p?d.offsetWidth:v,o=p?d.offsetHeight:w,r=R(v)!==f||R(w)!==o;return r&&(v=f,w=o),{width:v,height:w,$:r}}(n);let l=(m?R(t.width):t.width)/u,h=(m?R(t.height):t.height)/i;return l&&Number.isFinite(l)||(l=1),h&&Number.isFinite(h)||(h=1),{x:l,y:h}}function G(e,n,t,u){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),m=A(e);let l=C(1);n&&(l=k(e));const h=C(0);let d=(i.left+h.x)/l.x,a=(i.top+h.y)/l.y,v=i.width/l.x,w=i.height/l.y;if(m){const p=u;let f=g(m),o=N(f);for(;o&&u&&p!==f;){const r=k(o),c=o.getBoundingClientRect(),s=T(o),y=c.left+(o.clientLeft+parseFloat(s.paddingLeft))*r.x,x=c.top+(o.clientTop+parseFloat(s.paddingTop))*r.y;d*=r.x,a*=r.y,v*=r.x,w*=r.y,d+=y,a+=x,f=g(o),o=N(f)}}return function(p){const{x:f,y:o,width:r,height:c}=p;return{width:r,height:c,top:o,left:f,right:f+r,bottom:o+c,x:f,y:o}}({width:v,height:w,x:d,y:a})}function ee(e,n,t,u){u===void 0&&(u={});const{ancestorScroll:i=!0,ancestorResize:m=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:d=!1}=u,a=A(e),v=i||m?[...a?L(a):[],...L(n)]:[];v.forEach(c=>{i&&c.addEventListener("scroll",t,{passive:!0}),m&&c.addEventListener("resize",t)});const w=a&&h?function(c,s){let y,x=null;const O=J(c);function B(){var b;clearTimeout(y),(b=x)==null||b.disconnect(),x=null}return function b(S,E){S===void 0&&(S=!1),E===void 0&&(E=1),B();const{left:H,top:I,width:q,height:V}=c.getBoundingClientRect();if(S||s(),!q||!V)return;const W={rootMargin:-F(I)+"px "+-F(O.clientWidth-(H+q))+"px "+-F(O.clientHeight-(I+V))+"px "+-F(H)+"px",threshold:_(0,Z(1,E))||1};let $=!0;function j(P){const z=P[0].intersectionRatio;if(z!==E){if(!$)return b();z?b(!1,z):y=setTimeout(()=>{b(!1,1e-7)},1e3)}$=!1}try{x=new IntersectionObserver(j,{...W,root:O.ownerDocument})}catch{x=new IntersectionObserver(j,W)}x.observe(c)}(!0),B}(a,t):null;let p,f=-1,o=null;l&&(o=new ResizeObserver(c=>{let[s]=c;s&&s.target===a&&o&&(o.unobserve(n),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=o)==null||y.observe(n)})),t()}),a&&!d&&o.observe(a),o.observe(n));let r=d?G(e):null;return d&&function c(){const s=G(e);!r||s.x===r.x&&s.y===r.y&&s.width===r.width&&s.height===r.height||t(),r=s,p=requestAnimationFrame(c)}(),t(),()=>{var c;v.forEach(s=>{i&&s.removeEventListener("scroll",t),m&&s.removeEventListener("resize",t)}),w==null||w(),(c=o)==null||c.disconnect(),o=null,d&&cancelAnimationFrame(p)}}export{ee as a};
