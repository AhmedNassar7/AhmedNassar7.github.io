import{C as B,R as X,O as P,P as Y,z as Z,g as O,l as D,w as R,y as j,G as A,H as $,I as N,D as tt,A as J}from"./tsparticles-engine-B56Pkamw.js";class nt extends B{constructor(t,n,s,i){super(t,n,s),this.canvasSize=i,this.canvasSize={...i}}contains(t){const{width:n,height:s}=this.canvasSize,{x:i,y:e}=t;return super.contains(t)||super.contains({x:i-n,y:e})||super.contains({x:i-n,y:e-s})||super.contains({x:i,y:e-s})}intersects(t){if(super.intersects(t))return!0;const n=t,s=t,i={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(s.radius!==void 0){const e=new B(i.x,i.y,2*s.radius);return super.intersects(e)}if(n.size!==void 0){const e=new X(i.x,i.y,2*n.size.width,2*n.size.height);return super.intersects(e)}return!1}}class it{constructor(){this.blur=5,this.color=new P,this.color.value="#000",this.enable=!1}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=P.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable))}}class st{constructor(){this.enable=!1,this.frequency=1}load(t){t&&(t.color!==void 0&&(this.color=P.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity))}}class et{constructor(){this.blink=!1,this.color=new P,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new it,this.triangles=new st,this.width=1,this.warp=!1}load(t){t&&(t.id!==void 0&&(this.id=t.id),t.blink!==void 0&&(this.blink=t.blink),this.color=P.create(this.color,t.color),t.consent!==void 0&&(this.consent=t.consent),t.distance!==void 0&&(this.distance=t.distance),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),t.width!==void 0&&(this.width=t.width),t.warp!==void 0&&(this.warp=t.warp))}}function ot(p,t,n,s,i){const{dx:e,dy:o,distance:a}=O(p,t);if(!i||a<=n)return a;const d={x:Math.abs(e),y:Math.abs(o)},k=Math.min(d.x,s.width-d.x),y=Math.min(d.y,s.height-d.y);return Math.sqrt(k**2+y**2)}class at extends Y{constructor(t){super(t),this._setColor=n=>{if(!n.options.links)return;const s=this.linkContainer,i=n.options.links;let e=i.id===void 0?s.particles.linksColor:s.particles.linksColors.get(i.id);if(e)return;const o=i.color;e=Z(o,i.blink,i.consent),i.id===void 0?s.particles.linksColor=e:s.particles.linksColors.set(i.id,e)},this.linkContainer=t}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(t){if(!t.options.links)return;t.links=[];const n=t.getPosition(),s=this.container,i=s.canvas.size;if(n.x<0||n.y<0||n.x>i.width||n.y>i.height)return;const e=t.options.links,o=e.opacity,a=t.retina.linksDistance??0,d=e.warp,k=d?new nt(n.x,n.y,a,i):new B(n.x,n.y,a),y=s.particles.quadTree.query(k);for(const r of y){const l=r.options.links;if(t===r||!(l!=null&&l.enable)||e.id!==l.id||r.spawning||r.destroyed||!r.links||t.links.some(b=>b.destination===r)||r.links.some(b=>b.destination===t))continue;const c=r.getPosition();if(c.x<0||c.y<0||c.x>i.width||c.y>i.height)continue;const q=ot(n,c,a,i,d&&l.warp);if(q>a)continue;const C=(1-q/a)*o;this._setColor(t),t.links.push({destination:r,opacity:C})}}isEnabled(t){var n;return!!((n=t.options.links)!=null&&n.enable)}loadParticlesOptions(t,...n){t.links||(t.links=new et);for(const s of n)t.links.load((s==null?void 0:s.links)??(s==null?void 0:s.lineLinked)??(s==null?void 0:s.line_linked))}reset(){}}function K(p,t){const n=((s=p.map(e=>e.id)).sort((e,o)=>e-o),s.join("_"));var s;let i=t.get(n);return i===void 0&&(i=N(),t.set(n,i)),i}class rt{constructor(t){this.container=t,this._drawLinkLine=(n,s)=>{const i=n.options.links;if(!(i!=null&&i.enable))return;const e=this.container,o=e.actualOptions,a=s.destination,d=n.getPosition(),k=a.getPosition();let y=s.opacity;e.canvas.draw(r=>{var _;let l;const c=(_=n.options.twinkle)==null?void 0:_.lines;if(c!=null&&c.enable){const v=c.frequency,f=A(c.color);N()<v&&f&&(l=f,y=tt(c.opacity))}if(!l){const v=i.id!==void 0?e.particles.linksColors.get(i.id):e.particles.linksColor;l=J(n,a,v)}if(!l)return;const q=n.retina.linksWidth??0,C=n.retina.linksDistance??0,{backgroundMask:b}=o;(function(v){let f=!1;const{begin:h,end:g,maxDistance:M,context:u,canvasSize:w,width:F,backgroundMask:E,colorLine:Q,opacity:U,links:G}=v;if(D(h,g)<=M)R(u,h,g),f=!0;else if(G.warp){let x,m;const V={x:g.x-w.width,y:g.y},I=O(h,V);if(I.distance<=M){const T=h.y-I.dy/I.dx*h.x;x={x:0,y:T},m={x:w.width,y:T}}else{const T={x:g.x,y:g.y-w.height},z=O(h,T);if(z.distance<=M){const S=-(h.y-z.dy/z.dx*h.x)/(z.dy/z.dx);x={x:S,y:0},m={x:S,y:w.height}}else{const S={x:g.x-w.width,y:g.y-w.height},L=O(h,S);if(L.distance<=M){const H=h.y-L.dy/L.dx*h.x;x={x:-H/(L.dy/L.dx),y:H},m={x:x.x+w.width,y:x.y+w.height}}}}x&&m&&(R(u,h,x),R(u,g,m),f=!0)}if(!f)return;u.lineWidth=F,E.enable&&(u.globalCompositeOperation=E.composite),u.strokeStyle=j(Q,U);const{shadow:W}=G;if(W.enable){const x=A(W.color);x&&(u.shadowBlur=W.blur,u.shadowColor=j(x))}u.stroke()})({context:r,width:q,begin:d,end:k,maxDistance:C,canvasSize:e.canvas.size,links:i,backgroundMask:b,colorLine:l,opacity:y})})},this._drawLinkTriangle=(n,s,i)=>{const e=n.options.links;if(!(e!=null&&e.enable))return;const o=e.triangles;if(!o.enable)return;const a=this.container,d=a.actualOptions,k=s.destination,y=i.destination,r=o.opacity??(s.opacity+i.opacity)/2;r<=0||a.canvas.draw(l=>{const c=n.getPosition(),q=k.getPosition(),C=y.getPosition(),b=n.retina.linksDistance??0;if(D(c,q)>b||D(C,q)>b||D(C,c)>b)return;let _=A(o.color);if(!_){const v=e.id!==void 0?a.particles.linksColors.get(e.id):a.particles.linksColor;_=J(n,k,v)}_&&function(v){const{context:f,pos1:h,pos2:g,pos3:M,backgroundMask:u,colorTriangle:w,opacityTriangle:F}=v;$(f,h,g,M),u.enable&&(f.globalCompositeOperation=u.composite),f.fillStyle=j(w,F),f.fill()}({context:l,pos1:c,pos2:q,pos3:C,backgroundMask:d.backgroundMask,colorTriangle:_,opacityTriangle:r})})},this._drawTriangles=(n,s,i,e)=>{var d,k,y;const o=i.destination;if(!((d=n.links)!=null&&d.triangles.enable)||!((k=o.options.links)!=null&&k.triangles.enable))return;const a=(y=o.links)==null?void 0:y.filter(r=>{const l=this._getLinkFrequency(o,r.destination);return o.options.links&&l<=o.options.links.frequency&&e.findIndex(c=>c.destination===r.destination)>=0});if(a!=null&&a.length)for(const r of a){const l=r.destination;this._getTriangleFrequency(s,o,l)>n.links.triangles.frequency||this._drawLinkTriangle(s,i,r)}},this._getLinkFrequency=(n,s)=>K([n,s],this._freqs.links),this._getTriangleFrequency=(n,s,i)=>K([n,s,i],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(t,n){const{links:s,options:i}=n;if(!s||s.length<=0)return;const e=s.filter(o=>i.links&&this._getLinkFrequency(n,o.destination)<=i.links.frequency);for(const o of e)this._drawTriangles(i,n,o,e),o.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(t){if(t.links=[],!t.options.links)return;const n=this.container.retina.pixelRatio,{retina:s}=t,{distance:i,width:e}=t.options.links;s.linksDistance=i*n,s.linksWidth=e*n}particleDestroyed(t){t.links=[]}}class ct{constructor(){this.id="links"}getPlugin(t){return new rt(t)}loadOptions(){}needsPlugin(){return!0}}async function dt(p,t=!0){await async function(n,s=!0){await n.addInteractor("particlesLinks",i=>new at(i),s)}(p,t),await async function(n,s=!0){const i=new ct;await n.addPlugin(i,s)}(p,t)}export{dt as l};
